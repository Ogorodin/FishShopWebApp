<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Your cart</title>
<link
	th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css}"
	rel="stylesheet">
<link
	href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"
	rel="stylesheet">
</head>
<body>
	<div th:insert="fragments/fragments :: header">HEADER</div>
	<div class="container">
		<div class="row">
			<div th:if="${productsAndQtyPairs.isEmpty()}" class="container">
				<div>
					<ol class="breadcrumb">
						<li>Your cart is empty.</li>
					</ol>
				</div>
			</div>
			<div th:if="${!productsAndQtyPairs.isEmpty()}" class="container">
				<table class="table table-hover table-condensed">
					<thead>
						<tr>
							<th style="width: 50%">Product</th>
							<th style="width: 10%">Price</th>
							<th style="width: 8%">Quantity</th>
							<th style="width: 22%" class="text-center">Subtotal</th>
							<th style="width: 5%"></th>
							<th style="width: 5%"></th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="productDTO : ${productAndQtyPairs}"
							th:with="productID=${productDTO.key.id}, quantity=${productDTO.value}" >
							<td>
								<div class="row">
									<div class="col-sm-2 hidden-xs">
										<img th:src="@{/photos/{imgName}(imgName=${productDTO.key.title+'.jpg'})}"
											alt="${productDTO.title}"	class="img-responsive"/>
									</div>
									<div class="col-sm-10">
										<h4 th:text="${productDTO.key.title}" class="nomargin">Product 1</h4>
										<p th:text="${productDTO.key.description}">Fish description here.</p>
									</div>
								</div>
							</td>
							<!-- product price -->
							<td><p th:text="${'$ ' + productDTO.key.price}">$ xxx</p></td>
							<!-- quantity -->
							<td>
								<input type="number"  th:value="${quantity}" id="qty" name="qty"
									class="form-control text-center">
							</td>
							<!-- subtotal -->
							<td th:text="${productDTO.key.subtotal}" class="text-center">$ xxx</td>
							<!-- refresh cart -->
							<td>
								<form th:action="@{/cart/refreshCartView}">
									<input type="hidden" value="#{qty}"/>
									<button type="submit" class="btn btn-info btn-sm">
										<i class="fa fa-refresh"></i>
									</button>
								</form>
							</td>
							<!-- delete product -->
							<td>
								<form th:action="@{/cart/deleteProduct}">
								<input type="hidden" th:value="${productID}" name="productId" id="productId" />
									<button type="submit" class="btn btn-danger btn-sm">
										<i class="fa fa-trash-o"></i>
									</button>
								</form>
							</td>
						</tr>
					</tbody>
					<tfoot>
						<tr class="visible-xs">
							<td class="text-center"><strong>Total 1.99</strong></td>
						</tr>
						<tr>
							<td>
								<a th:href="@{/index}" class="btn btn-warning">
									<i class="fa fa-angle-left"></i> Continue Shopping</a>
							</td>
							<td colspan="2" class="hidden-xs"></td>
							<td class="hidden-xs text-center"><strong>Total $1.99</strong></td>
							<td>
							</td>
							<td>
								<a th:href="@{/checkout}" class="btn btn-success btn-block"> Checkout
									<i class="fa fa-angle-right"></i>
								</a>
							</td>
							<td>
								
							</td>
						</tr>
					</tfoot>
				</table>
			</div>

		</div>
	</div>

</body>
</html>